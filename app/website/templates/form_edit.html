<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="{{ url_for('site.static', filename='css/style.css') }}">

  <title>{{ element.name }}</title>
</head>

<body>

<nav class="navbar sticky-top navbar-expand-lg navbar-light bg-light">

  <a class="navbar-brand" href="{{ url_for('site.form_list') }}">
    <img src="{{ url_for('site.static', filename='assets/arrow_back.svg') }}" width="30" height="30"
         class="d-inline-block align-top" alt="">
  </a>
  <form method="post" class="form-inline" action="{{ url_for('site.form_edit', _id=element.id) }}" id="name-field">
    <div class="form-group mb-2">
      <label for="element-name" class="sr-only">Name</label>
      <input type="text" class="hu-line-input form-control-plaintext h5 pb-0" id="element-name"
             value="{{ element.name }}" name="name" onchange="this.form.submit()">
    </div>
  </form>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="#">Preview</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Send</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Settings</a>
      </li>
    </ul>
  </div>

  <form class="form-inline">
    <div class="input-group my-auto">
      <div class="input-group-prepend">
        <button class="btn btn-outline-success" type="button">Search</button>
      </div>
      <input type="search" class="form-control" placeholder="Search" aria-label="Search"
             aria-describedby="basic-addon1">
    </div>
  </form>

</nav>

<div class="card my-5 mx-auto" style="max-width: 50rem;">

  <div class="card-header">
    <ul class="nav justify-content-center nav-tabs card-header-tabs">
      <li class="nav-item">
        <a class="nav-link active" href="#">Questions</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#">Responses</a>
      </li>
    </ul>
  </div>

  <div class="accordion" id="fields">

    <div class="card no-sides left-mark" style="border-top: none;">
      <div class="card-body" data-toggle="collapse" data-target="#collapse-0" aria-expanded="false"
           aria-controls="collapse-0">
        <form method="post" action="{{ url_for('site.form_edit', _id=element.id) }}" id="title-field">
          <div class="form-group mb-2">
            <label for="element-name" class="sr-only">Title</label>
            <input type="text" class="form-control-plaintext h3 u-line-input" id="element-title"
                   value="{{ element.title }}" name="title" onchange="this.form.submit()">
            <label for="element-name" class="sr-only">Description</label>
            <input type="text" class="form-control-plaintext u-line-input" id="element-des" placeholder="Description..."
                   {% if element.description %} value="{{ element.description }}" {% endif %} name="description"
                   onchange="this.form.submit()">
          </div>
        </form>
      </div>

      <div id="collapse-0" class="collapse" aria-labelledby="heading-0" data-parent="#fields"></div>
    </div>

    {% for field in element.fields %}
    {% set i = loop.index %}
    <form action="{{ url_for('site.form_field_edit', form_id=element.id, field_id=field._id) }}"
          method="post" id="field-{{ i }}" class="card hide-choices no-sides left-mark">

      <div class="card-body form-row" id="heading-{{ i }}" data-toggle="collapse" role="button"
           data-target="#collapse-{{ i }}" aria-expanded="false" aria-controls="collapse-{{ i }}">

        <div class="col-md-7 driver">
          <label for="txt-{{ i }}" class="sr-only">Question</label>
          <input type="text" class="form-control-plaintext h5 u-line-input pb-0 form-prop"
                 id="txt-{{ i }}" placeholder="Question" name="displayed_text"
                 {% if field.displayed_text %} value="{{ field.displayed_text }}" {% endif %}
                 onchange="this.form.submit()">
        </div>

        <div class="col-md-1 image-upload driven">
          <label for="img-{{ i }}">
            <img src="{{ url_for('site.static', filename='assets/insert_photo.svg') }}"
                 width="30" height="30" class="d-inline-block align-top" alt="">
          </label>
          <input type="file" accept="image/*"  id="img-{{ i }}">
        </div>

        <div class="col-md-4 dropdown">
          <label for="dtype-{{ i }}" class="sr-only">Input Type</label>
          <select class="custom-select" id="dtype-{{ i }}" name="data_type"
                  onchange="change_dtype(this, {{ i }}, value);">
            {% for d_type in d_types %}
            <option value="{{ d_type }}" {% if field.data_type == d_type %} selected {% endif %}>
              {{ d_type }}
            </option>
            {% endfor %}
          </select>
        </div>

      </div>

      <div id="collapse-{{ i }}" class="collapse" aria-labelledby="heading-{{ i }}"
           data-parent="#fields">

        <div class="card-body">
          <div class="d-type-prop">
            {% for d_type in d_types %}
            <div class="prop" id="{{ d_type }}{{ i }}"
                 {% if field.data_type != d_type %} style="display: none;" {% endif %}>
              <h3>{{ d_type }}</h3>
            </div>
            {% endfor %}
          </div>

          <p>
            Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid.
          </p>

        </div>

        <div class="card-footer d-flex justify-content-end">
          <div class="form-inline pl-3" style="border-left: 1px solid rgba(0,0,0,.25);">
            <span class="mb-0 mr-2 h6" style="color: #333333;">Required</span>
            <label class="switch">
              <input type="checkbox" name="required" onchange="this.form.submit()"
                     {% if field.required %} checked {% endif %}>
              <span class="slider round"></span>
            </label>
            <!--More will be here-->
          </div>
          <!--More will be here-->
        </div>
      </div>
    </form>
    {% endfor %}

  </div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
<script type="text/javascript" src="{{ url_for('site.static', filename='js/app.js') }}"></script>

</body>
</html>
